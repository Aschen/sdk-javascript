sudo: false
language: node_js
node_js:
- 6
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
script:
- npm run build && npm test && cat ./coverage/lcov.info | ./node_modules/.bin/codecov
- chmod 755 ${TRAVIS_BUILD_DIR}/deploy.sh && sh -c "${TRAVIS_BUILD_DIR}/deploy.sh"
before_install:
- export CC="gcc-4.9" CXX="g++-4.9"
install:
- npm install
env:
  global:
    secure: 07HR3Vk1Et8Rc9i5Kj5KYrPcBB8JACRTjFJ5jmKuixy581CD0SFwP2u9yVQGTwtr3Q2htP3Hn+kAT0Y+G7K2F6vUeg2d5Z4HCLtfl3JXVzq67h8Yue8v5X2aQOLmQzUTNAAPFTjqdmIydquqRePiC/Acvszx4OmHeYx2YTD+2s7dMyAK9LfqdbFOX6ckhPc+oO66BWntquYqHH3fC1y3csy97Xay4Tfa2qBNE45dLXhy67zva3f4rh4aQcknjfK+AqPqtw5Ar9Tz/nGDbVJpzJQn56b5Ts3zq9rfwrkBTJUBF94gD+EvF+NgrbaruY3fL5pzVWwXs11UBE/RL0joR+ecBZx+C8GfMQf+RqrUQMQcMiI6hJDhrCK8LjCkt0BDt/Sp74p/6zoG8cc72ewjLJAXLrsaCLT9FtWAlAcyl3c7+1UASXp0w4+cKnCqrepRaDFkllYZ+Sl7zRy+H4AI+XAaNYjNIDCwKShLjU/F8aOHsNnzmVqWYGD1RNvrO4GLGBTtxN2T+7X/iltWTw/wjEb/myypo0yUyoVac023o8vw3aQ+rXnYa4PXpysBAu1GCGer84MF2wPoc60ujiUK/m5NHeMDoTFuvGW6mXPVYWYoEpqirary+1u5Ods76uEm+y9Zq2L5Hb54o1vLVpZ2Zng7cH6hMfbF1kPuOlZQKgM=
deploy:
  provider: npm
  skip_cleanup: true
  email: support@kuzzle.io
  api_key:
    secure: qVqLttUHqlcsAWet9BXv+RdezE/wHbSku/lUhC0oK6T9U5H0M50lfq8fkCT24zhhn/f19QTnNtcIKfWUZGMNTrAw67A0I3UGxTUwZX/vu7p/GoJFNJR7tFYIgaG9ll5scZdeYcxlohBxTv47/spYSEi5FyHLRliUH8Jo6qed8/4p8c6ABRRyh+E30I6C+/bBbAi2qjctc7HitJJ2dIiPb6qbOQGkGimOG+sdibqPq2tPRD5i2cV6YWwBs9g4ewMxM1MKZhsHS/ayliZ2evkrJRXcd2K5yaArTa8s+Y+8zU0AuZJCxfgSuxwwl9jAcTC9gPUhmEAPXp6TlKqoTIeG4uJOveEq0OIAmli9rLR/nNqoikJaTdzSloKI93fv39PCa/Dm2YEIIEqfU9qs9+YAFoJLhIyq8pzXIgk1Aby3dZUW3nlraQ/GfJF9btde6dA85tRwN40BjeUVHEbjgDWjYmKgyjyr6oxPcWd+2pBfyFLiHFQ/l43YxAG0zjgGxLpCVsjMWLq6ZtGmZpSzpL94YGYdHcj/yH+gTVtbnghiWSs6Rd2RCM+0OvpmcyEp6rqe2zmKf8c62ByupEWyEN1aUlqZHGVZsqHtwbAN4cl2TmwIktb4RGNCCTnuJP+bhtp2iLuoQmCuI7WwKb+ztwsYpZYWHfOqLGT4qzDEIHjBaH0=
  on:
    repo: kuzzleio/sdk-javascript
    branch: master
notifications:
  webhooks:
    urls:
    - https://webhooks.gitter.im/e/8e145155fbaaf37cffea
    on_success: change
    on_failure: always
    on_start: never
  email: false
  slack:
    secure: m0BEda/eXxYkil0zDZ1uNpK13kiNbb5/80I5OqDBz6X7/WH3uhWIV6q38lI929tQKz04eHAfVDaRSoPk1XwZBnb70MgcRmSG/m4/moR7BCnx7D9hHFqhNf0EfdzwEg44dCCVtD2vUvChtYV+jK74sNd4yqeq86YXi33qS7SYLS6kYnRloX0D7sQXDy14FWU2a5+hsrPX8yBoWuPjBergvK6W1dZAG+SfDywaqsrUDs+q64yEHiYV9VlvVZ/oKXZiDnVcB2hi0uulIZ8+iZaMJFEU30uCQiK6w3HG587yx3sVJmprr64ZYHKaFJD2ZAG1td6wJ1ccJsU/ruGkj4+0CeoZUYYBYXYQ4qhQl8F2QT0m+8dWqPwzYpxEoqyvGS9ioZG/YI18V2CE1pEyc72JzEv6c3AgDbtwrLH5s3ViNts7kulk3wwCzuAww+DapSV9ggezo+Bs7OGRpXwh/saeKWUCLqTkLQTjuq2dFVdo85HsC2RrLcSsZLMTOuV/A//FNBDJBlNnuneGP84zGkWGPEja0FFXvm2TS95gh1hd2PMe+QxjygOAvIMLmDmfdlWSLayUeWbqp20EdF7TUHV0dvBucga8s3UvFhIMnnGLS9vcNEIRtVornXznwdYSLbYD0mLXNtitneXTnSAxilThKtGDPOWQFkYkyoFV9FEwKO8=
    on_success: never
    on_failure: always
    on_start: never
