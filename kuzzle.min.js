/*! @license Kuzzle v0.1.0
 License: https://github.com/kuzzleio/kuzzle/LICENSE.md */
function Kuzzle(t){return t&&""!==t?this instanceof Kuzzle?(this.socket=io(t),this.subscribe=function(t,o,r){var e=Math.uuid();this.socket.once(e,function(t){return t.error?(console.error(t.error),!1):(this.socket.off(t),void this.socket.on(t,function(t){r(t)}))}.bind(this)),this.socket.emit("subscribe",{requestId:e,action:"on",collection:t,body:o})},this.write=function(t,o,r,e,n){var i=Math.uuid();this.socket.once(i,function(t){return t.error?(console.error(t.error),!1):void(n&&n(t))}),void 0===e&&(e=!1),this.socket.emit("write",{requestId:i,action:o,persist:e,collection:t,body:r})},this.search=function(t,o,r){var e=Math.uuid();this.socket.once(e,function(t){return t.error?(console.error(t.error),!1):void r(t)}),this.socket.emit("read",{requestId:e,action:"search",collection:t,body:o})},void(this.get=function(t,o,r){var e=Math.uuid();this.socket.once(e,function(t){return t.error?(console.error(t.error),!1):void r(t)}),this.socket.emit("read",{requestId:e,action:"get",collection:t,id:o})})):new Kuzzle(t):(console.error("Url to Kuzzle can't be empty"),!1)}!function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(o,r){var e,n=t,i=[];if(r=r||n.length,o)for(e=0;o>e;e++)i[e]=n[0|Math.random()*r];else{var c;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",e=0;36>e;e++)i[e]||(c=0|16*Math.random(),i[e]=n[19==e?3&c|8:c])}return i.join("")},Math.uuidFast=function(){for(var o,r=t,e=new Array(36),n=0,i=0;36>i;i++)8==i||13==i||18==i||23==i?e[i]="-":14==i?e[i]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),o=15&n,n>>=4,e[i]=r[19==i?3&o|8:o]);return e.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=16*Math.random()|0,r="x"==t?o:3&o|8;return r.toString(16)})}}();